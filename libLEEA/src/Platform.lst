GAS LISTING /tmp/ccwbtrHk.s 			page 1


   1               		.file	"Platform.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/tmp/L3/src/",100,0,2,.Ltext0
   8               		.stabs	"Platform.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=r(0,2);0;127;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"__int128:t(0,6)=@s128;r(0,6);02000000000000000000000000000000000000000000;0177777777777777
  18               		.stabs	"__int128 unsigned:t(0,7)=@s128;r(0,7);0;03777777777777777777777777777777777777777777;",128
  19               		.stabs	"long long int:t(0,8)=@s64;r(0,8);01000000000000000000000;00777777777777777777777;",128,0,0
  20               		.stabs	"long long unsigned int:t(0,9)=@s64;r(0,9);0;01777777777777777777777;",128,0,0,0
  21               		.stabs	"short int:t(0,10)=r(0,10);-32768;32767;",128,0,0,0
  22               		.stabs	"short unsigned int:t(0,11)=r(0,11);0;0177777;",128,0,0,0
  23               		.stabs	"signed char:t(0,12)=@s8;r(0,12);-128;127;",128,0,0,0
  24               		.stabs	"unsigned char:t(0,13)=@s8;r(0,13);0;255;",128,0,0,0
  25               		.stabs	"float:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"double:t(0,15)=r(0,1);4;0;",128,0,0,0
  27               		.stabs	"long double:t(0,16)=r(0,1);4;0;",128,0,0,0
  28               		.stabs	"short _Fract:t(0,17)=r(0,1);1;0;",128,0,0,0
  29               		.stabs	"_Fract:t(0,18)=r(0,1);2;0;",128,0,0,0
  30               		.stabs	"long _Fract:t(0,19)=r(0,1);4;0;",128,0,0,0
  31               		.stabs	"long long _Fract:t(0,20)=r(0,1);8;0;",128,0,0,0
  32               		.stabs	"unsigned short _Fract:t(0,21)=r(0,1);1;0;",128,0,0,0
  33               		.stabs	"unsigned _Fract:t(0,22)=r(0,1);2;0;",128,0,0,0
  34               		.stabs	"unsigned long _Fract:t(0,23)=r(0,1);4;0;",128,0,0,0
  35               		.stabs	"unsigned long long _Fract:t(0,24)=r(0,1);8;0;",128,0,0,0
  36               		.stabs	"_Sat short _Fract:t(0,25)=r(0,1);1;0;",128,0,0,0
  37               		.stabs	"_Sat _Fract:t(0,26)=r(0,1);2;0;",128,0,0,0
  38               		.stabs	"_Sat long _Fract:t(0,27)=r(0,1);4;0;",128,0,0,0
  39               		.stabs	"_Sat long long _Fract:t(0,28)=r(0,1);8;0;",128,0,0,0
  40               		.stabs	"_Sat unsigned short _Fract:t(0,29)=r(0,1);1;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned _Fract:t(0,30)=r(0,1);2;0;",128,0,0,0
  42               		.stabs	"_Sat unsigned long _Fract:t(0,31)=r(0,1);4;0;",128,0,0,0
  43               		.stabs	"_Sat unsigned long long _Fract:t(0,32)=r(0,1);8;0;",128,0,0,0
  44               		.stabs	"short _Accum:t(0,33)=r(0,1);2;0;",128,0,0,0
  45               		.stabs	"_Accum:t(0,34)=r(0,1);4;0;",128,0,0,0
  46               		.stabs	"long _Accum:t(0,35)=r(0,1);8;0;",128,0,0,0
  47               		.stabs	"long long _Accum:t(0,36)=r(0,1);8;0;",128,0,0,0
  48               		.stabs	"unsigned short _Accum:t(0,37)=r(0,1);2;0;",128,0,0,0
  49               		.stabs	"unsigned _Accum:t(0,38)=r(0,1);4;0;",128,0,0,0
  50               		.stabs	"unsigned long _Accum:t(0,39)=r(0,1);8;0;",128,0,0,0
  51               		.stabs	"unsigned long long _Accum:t(0,40)=r(0,1);8;0;",128,0,0,0
  52               		.stabs	"_Sat short _Accum:t(0,41)=r(0,1);2;0;",128,0,0,0
  53               		.stabs	"_Sat _Accum:t(0,42)=r(0,1);4;0;",128,0,0,0
  54               		.stabs	"_Sat long _Accum:t(0,43)=r(0,1);8;0;",128,0,0,0
  55               		.stabs	"_Sat long long _Accum:t(0,44)=r(0,1);8;0;",128,0,0,0
  56               		.stabs	"_Sat unsigned short _Accum:t(0,45)=r(0,1);2;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned _Accum:t(0,46)=r(0,1);4;0;",128,0,0,0
GAS LISTING /tmp/ccwbtrHk.s 			page 2


  58               		.stabs	"_Sat unsigned long _Accum:t(0,47)=r(0,1);8;0;",128,0,0,0
  59               		.stabs	"_Sat unsigned long long _Accum:t(0,48)=r(0,1);8;0;",128,0,0,0
  60               		.stabs	"void:t(0,49)=(0,49)",128,0,0,0
  61               		.stabs	"../include/Platform.h",130,0,0,0
  62               		.stabs	"/usr/lib/avr/include/stdlib.h",130,0,0,0
  63               		.stabs	"/usr/lib/gcc/avr/5.4.0/include/stddef.h",130,0,0,0
  64               		.stabs	"size_t:t(3,1)=(0,4)",128,0,216,0
  65               		.stabs	"wchar_t:t(3,2)=(0,1)",128,0,328,0
  66               		.stabn	162,0,0,0
  67               		.stabs	"div_t:t(2,1)=(2,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,73,0
  68               		.stabs	"ldiv_t:t(2,3)=(2,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,79,0
  69               		.stabs	"__compar_fn_t:t(2,5)=(2,6)=*(2,7)=f(0,1)",128,0,82,0
  70               		.stabn	162,0,0,0
  71               		.stabs	"/usr/lib/avr/include/avr/io.h",130,0,0,0
  72               		.stabs	"/usr/lib/avr/include/avr/sfr_defs.h",130,0,0,0
  73               		.stabs	"/usr/lib/avr/include/inttypes.h",130,0,0,0
  74               		.stabs	"/usr/lib/gcc/avr/5.4.0/include/stdint.h",130,0,0,0
  75               		.stabs	"/usr/lib/avr/include/stdint.h",130,0,0,0
  76               		.stabs	"int8_t:t(8,1)=(0,12)",128,0,125,0
  77               		.stabs	"uint8_t:t(8,2)=(0,13)",128,0,126,0
  78               		.stabs	"int16_t:t(8,3)=(0,1)",128,0,127,0
  79               		.stabs	"uint16_t:t(8,4)=(0,4)",128,0,128,0
  80               		.stabs	"int32_t:t(8,5)=(0,3)",128,0,129,0
  81               		.stabs	"uint32_t:t(8,6)=(0,5)",128,0,130,0
  82               		.stabs	"int64_t:t(8,7)=(0,8)",128,0,132,0
  83               		.stabs	"uint64_t:t(8,8)=(0,9)",128,0,133,0
  84               		.stabs	"intptr_t:t(8,9)=(8,3)",128,0,146,0
  85               		.stabs	"uintptr_t:t(8,10)=(8,4)",128,0,151,0
  86               		.stabs	"int_least8_t:t(8,11)=(8,1)",128,0,163,0
  87               		.stabs	"uint_least8_t:t(8,12)=(8,2)",128,0,168,0
  88               		.stabs	"int_least16_t:t(8,13)=(8,3)",128,0,173,0
  89               		.stabs	"uint_least16_t:t(8,14)=(8,4)",128,0,178,0
  90               		.stabs	"int_least32_t:t(8,15)=(8,5)",128,0,183,0
  91               		.stabs	"uint_least32_t:t(8,16)=(8,6)",128,0,188,0
  92               		.stabs	"int_least64_t:t(8,17)=(8,7)",128,0,196,0
  93               		.stabs	"uint_least64_t:t(8,18)=(8,8)",128,0,203,0
  94               		.stabs	"int_fast8_t:t(8,19)=(8,1)",128,0,217,0
  95               		.stabs	"uint_fast8_t:t(8,20)=(8,2)",128,0,222,0
  96               		.stabs	"int_fast16_t:t(8,21)=(8,3)",128,0,227,0
  97               		.stabs	"uint_fast16_t:t(8,22)=(8,4)",128,0,232,0
  98               		.stabs	"int_fast32_t:t(8,23)=(8,5)",128,0,237,0
  99               		.stabs	"uint_fast32_t:t(8,24)=(8,6)",128,0,242,0
 100               		.stabs	"int_fast64_t:t(8,25)=(8,7)",128,0,250,0
 101               		.stabs	"uint_fast64_t:t(8,26)=(8,8)",128,0,257,0
 102               		.stabs	"intmax_t:t(8,27)=(8,7)",128,0,277,0
 103               		.stabs	"uintmax_t:t(8,28)=(8,8)",128,0,282,0
 104               		.stabn	162,0,0,0
 105               		.stabn	162,0,0,0
 106               		.stabs	"int_farptr_t:t(6,1)=(8,5)",128,0,77,0
 107               		.stabs	"uint_farptr_t:t(6,2)=(8,6)",128,0,81,0
 108               		.stabn	162,0,0,0
 109               		.stabn	162,0,0,0
 110               		.stabs	"/usr/lib/avr/include/avr/fuse.h",130,0,0,0
 111               		.stabs	"__fuse_t:t(9,1)=(9,2)=s3low:(0,13),0,8;high:(0,13),8,8;extended:(0,13),16,8;;",128,0,244,0
 112               		.stabn	162,0,0,0
 113               		.stabn	162,0,0,0
 114               		.stabs	"/usr/lib/avr/include/avr/eeprom.h",130,0,0,0
GAS LISTING /tmp/ccwbtrHk.s 			page 3


 115               		.stabs	"/usr/lib/gcc/avr/5.4.0/include/stddef.h",130,0,0,0
 116               		.stabs	"ptrdiff_t:t(11,1)=(0,1)",128,0,149,0
 117               		.stabs	"max_align_t:t(11,2)=(11,3)=s12__max_align_ll:(0,8),0,64;__max_align_ld:(0,16),64,32;;",128
 118               		.stabn	162,0,0,0
 119               		.stabn	162,0,0,0
 120               		.stabs	"u8:t(1,1)=(0,13)",128,0,17,0
 121               		.stabs	"u16:t(1,2)=(0,11)",128,0,18,0
 122               		.stabs	"u32:t(1,3)=(0,5)",128,0,19,0
 123               		.stabs	"word:t(1,4)=(0,4)",128,0,103,0
 124               		.stabs	"bool:t(1,5)=(8,2)",128,0,107,0
 125               		.stabs	"byte:t(1,6)=(8,2)",128,0,108,0
 126               		.stabn	162,0,0,0
 127               		.section	.text.pinMode,"ax",@progbits
 128               		.stabs	"pinMode:F(0,49)",36,0,3,pinMode
 129               		.stabs	"pin:P(8,2)",64,0,3,24
 130               		.stabs	"mode:P(8,2)",64,0,3,22
 131               	.global	pinMode
 132               		.type	pinMode, @function
 133               	pinMode:
 134               		.stabd	46,0,0
   1:Platform.c    **** #include "Platform.h"
   2:Platform.c    **** 
   3:Platform.c    **** void pinMode(uint8_t pin, uint8_t mode)
   4:Platform.c    **** {
 135               		.stabn	68,0,4,.LM0-.LFBB1
 136               	.LM0:
 137               	.LFBB1:
 138 0000 CF93      		push r28
 139 0002 DF93      		push r29
 140               	/* prologue: function */
 141               	/* frame size = 0 */
 142               	/* stack size = 2 */
 143               	.L__stack_usage = 2
 144               	.LBB2:
   5:Platform.c    **** 	uint8_t bit = digitalPinToBitMask(pin);
 145               		.stabn	68,0,5,.LM1-.LFBB1
 146               	.LM1:
 147 0004 90E0      		ldi r25,0
 148 0006 FC01      		movw r30,r24
 149 0008 E050      		subi r30,lo8(-(digital_pin_to_bit_mask_PGM))
 150 000a F040      		sbci r31,hi8(-(digital_pin_to_bit_mask_PGM))
 151               	/* #APP */
 152               	 ;  5 "Platform.c" 1
 153 000c 2491      		lpm r18, Z
 154               		
 155               	 ;  0 "" 2
 156               	/* #NOAPP */
 157               	.LBE2:
 158               	.LBB3:
   6:Platform.c    **** 	uint8_t port = digitalPinToPort(pin);
 159               		.stabn	68,0,6,.LM2-.LFBB1
 160               	.LM2:
 161 000e FC01      		movw r30,r24
 162 0010 E050      		subi r30,lo8(-(digital_pin_to_port_PGM))
 163 0012 F040      		sbci r31,hi8(-(digital_pin_to_port_PGM))
 164               	/* #APP */
 165               	 ;  6 "Platform.c" 1
GAS LISTING /tmp/ccwbtrHk.s 			page 4


 166 0014 8491      		lpm r24, Z
 167               		
 168               	 ;  0 "" 2
 169               	/* #NOAPP */
 170               	.LBE3:
   7:Platform.c    **** 	volatile uint8_t *reg, *out;
   8:Platform.c    **** 
   9:Platform.c    **** 	if (port == NOT_A_PIN) return;
 171               		.stabn	68,0,9,.LM3-.LFBB1
 172               	.LM3:
 173 0016 8823      		tst r24
 174 0018 01F0      		breq .L1
 175               	.LBB4:
  10:Platform.c    **** 
  11:Platform.c    **** 	// JWS: can I let the optimizer do this?
  12:Platform.c    **** 	reg = portModeRegister(port);
 176               		.stabn	68,0,12,.LM4-.LFBB1
 177               	.LM4:
 178 001a 90E0      		ldi r25,0
 179 001c 880F      		lsl r24
 180 001e 991F      		rol r25
 181 0020 FC01      		movw r30,r24
 182 0022 E050      		subi r30,lo8(-(port_to_mode_PGM))
 183 0024 F040      		sbci r31,hi8(-(port_to_mode_PGM))
 184               	/* #APP */
 185               	 ;  12 "Platform.c" 1
 186 0026 C591      		lpm r28, Z+
 187 0028 D491      		lpm r29, Z
 188               		
 189               	 ;  0 "" 2
 190               	/* #NOAPP */
 191               	.LBE4:
 192               	.LBB5:
  13:Platform.c    **** 	out = portOutputRegister(port);
 193               		.stabn	68,0,13,.LM5-.LFBB1
 194               	.LM5:
 195 002a FC01      		movw r30,r24
 196 002c E050      		subi r30,lo8(-(port_to_output_PGM))
 197 002e F040      		sbci r31,hi8(-(port_to_output_PGM))
 198               	/* #APP */
 199               	 ;  13 "Platform.c" 1
 200 0030 A591      		lpm r26, Z+
 201 0032 B491      		lpm r27, Z
 202               		
 203               	 ;  0 "" 2
 204               	/* #NOAPP */
 205               	.LBE5:
  14:Platform.c    **** 
  15:Platform.c    **** 	if (mode == INPUT) { 
 206               		.stabn	68,0,15,.LM6-.LFBB1
 207               	.LM6:
 208 0034 6111      		cpse r22,__zero_reg__
 209 0036 00C0      		rjmp .L3
 210               	.LBB6:
  16:Platform.c    **** 		uint8_t oldSREG = SREG;
 211               		.stabn	68,0,16,.LM7-.LFBB1
 212               	.LM7:
GAS LISTING /tmp/ccwbtrHk.s 			page 5


 213 0038 9FB7      		in r25,__SREG__
  17:Platform.c    ****                 cli();
 214               		.stabn	68,0,17,.LM8-.LFBB1
 215               	.LM8:
 216               	/* #APP */
 217               	 ;  17 "Platform.c" 1
 218 003a F894      		cli
 219               	 ;  0 "" 2
  18:Platform.c    **** 		*reg &= ~bit;
 220               		.stabn	68,0,18,.LM9-.LFBB1
 221               	.LM9:
 222               	/* #NOAPP */
 223 003c 8881      		ld r24,Y
 224 003e 2095      		com r18
 225 0040 8223      		and r24,r18
 226 0042 8883      		st Y,r24
  19:Platform.c    **** 		*out &= ~bit;
 227               		.stabn	68,0,19,.LM10-.LFBB1
 228               	.LM10:
 229 0044 EC91      		ld r30,X
 230 0046 2E23      		and r18,r30
 231 0048 00C0      		rjmp .L8
 232               	.L3:
 233               	.LBE6:
  20:Platform.c    **** 		SREG = oldSREG;
  21:Platform.c    **** 	} else if (mode == INPUT_PULLUP) {
 234               		.stabn	68,0,21,.LM11-.LFBB1
 235               	.LM11:
 236 004a 6230      		cpi r22,lo8(2)
 237 004c 01F4      		brne .L4
 238               	.LBB7:
  22:Platform.c    **** 		uint8_t oldSREG = SREG;
 239               		.stabn	68,0,22,.LM12-.LFBB1
 240               	.LM12:
 241 004e 9FB7      		in r25,__SREG__
  23:Platform.c    ****                 cli();
 242               		.stabn	68,0,23,.LM13-.LFBB1
 243               	.LM13:
 244               	/* #APP */
 245               	 ;  23 "Platform.c" 1
 246 0050 F894      		cli
 247               	 ;  0 "" 2
  24:Platform.c    **** 		*reg &= ~bit;
 248               		.stabn	68,0,24,.LM14-.LFBB1
 249               	.LM14:
 250               	/* #NOAPP */
 251 0052 8881      		ld r24,Y
 252 0054 322F      		mov r19,r18
 253 0056 3095      		com r19
 254 0058 8323      		and r24,r19
 255 005a 8883      		st Y,r24
  25:Platform.c    **** 		*out |= bit;
 256               		.stabn	68,0,25,.LM15-.LFBB1
 257               	.LM15:
 258 005c EC91      		ld r30,X
 259 005e 2E2B      		or r18,r30
 260               	.L8:
GAS LISTING /tmp/ccwbtrHk.s 			page 6


 261 0060 2C93      		st X,r18
  26:Platform.c    **** 		SREG = oldSREG;
 262               		.stabn	68,0,26,.LM16-.LFBB1
 263               	.LM16:
 264 0062 9FBF      		out __SREG__,r25
 265               	.LBE7:
 266 0064 00C0      		rjmp .L1
 267               	.L4:
 268               	.LBB8:
  27:Platform.c    **** 	} else {
  28:Platform.c    **** 		uint8_t oldSREG = SREG;
 269               		.stabn	68,0,28,.LM17-.LFBB1
 270               	.LM17:
 271 0066 8FB7      		in r24,__SREG__
  29:Platform.c    ****                 cli();
 272               		.stabn	68,0,29,.LM18-.LFBB1
 273               	.LM18:
 274               	/* #APP */
 275               	 ;  29 "Platform.c" 1
 276 0068 F894      		cli
 277               	 ;  0 "" 2
  30:Platform.c    **** 		*reg |= bit;
 278               		.stabn	68,0,30,.LM19-.LFBB1
 279               	.LM19:
 280               	/* #NOAPP */
 281 006a E881      		ld r30,Y
 282 006c 2E2B      		or r18,r30
 283 006e 2883      		st Y,r18
  31:Platform.c    **** 		SREG = oldSREG;
 284               		.stabn	68,0,31,.LM20-.LFBB1
 285               	.LM20:
 286 0070 8FBF      		out __SREG__,r24
 287               	.L1:
 288               	/* epilogue start */
 289               	.LBE8:
  32:Platform.c    **** 	}
  33:Platform.c    **** }
 290               		.stabn	68,0,33,.LM21-.LFBB1
 291               	.LM21:
 292 0072 DF91      		pop r29
 293 0074 CF91      		pop r28
 294 0076 0895      		ret
 295               		.size	pinMode, .-pinMode
 296               		.stabs	"__addr16:r(8,4)",64,0,12,30
 297               		.stabn	192,0,0,.LBB4-.LFBB1
 298               		.stabn	224,0,0,.LBE4-.LFBB1
 299               		.stabs	"__addr16:r(8,4)",64,0,13,30
 300               		.stabn	192,0,0,.LBB5-.LFBB1
 301               		.stabn	224,0,0,.LBE5-.LFBB1
 302               		.stabs	"oldSREG:r(8,2)",64,0,16,25
 303               		.stabn	192,0,0,.LBB6-.LFBB1
 304               		.stabn	224,0,0,.LBE6-.LFBB1
 305               		.stabs	"oldSREG:r(8,2)",64,0,22,25
 306               		.stabn	192,0,0,.LBB7-.LFBB1
 307               		.stabn	224,0,0,.LBE7-.LFBB1
 308               		.stabs	"oldSREG:r(8,2)",64,0,28,24
 309               		.stabn	192,0,0,.LBB8-.LFBB1
GAS LISTING /tmp/ccwbtrHk.s 			page 7


 310               		.stabn	224,0,0,.LBE8-.LFBB1
 311               	.Lscope1:
 312               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 313               		.stabd	78,0,0
 314               		.section	.text.digitalWrite,"ax",@progbits
 315               		.stabs	"digitalWrite:F(0,49)",36,0,35,digitalWrite
 316               		.stabs	"pin:P(8,2)",64,0,35,24
 317               		.stabs	"val:P(8,2)",64,0,35,22
 318               	.global	digitalWrite
 319               		.type	digitalWrite, @function
 320               	digitalWrite:
 321               		.stabd	46,0,0
  34:Platform.c    **** 
  35:Platform.c    **** void digitalWrite(uint8_t pin, uint8_t val)
  36:Platform.c    **** {
 322               		.stabn	68,0,36,.LM22-.LFBB2
 323               	.LM22:
 324               	.LFBB2:
 325               	/* prologue: function */
 326               	/* frame size = 0 */
 327               	/* stack size = 0 */
 328               	.L__stack_usage = 0
 329               	.LBB9:
  37:Platform.c    ****   //uint8_t timer = digitalPinToTimer(pin);
  38:Platform.c    **** 	uint8_t bit = digitalPinToBitMask(pin);
 330               		.stabn	68,0,38,.LM23-.LFBB2
 331               	.LM23:
 332 0000 90E0      		ldi r25,0
 333 0002 FC01      		movw r30,r24
 334 0004 E050      		subi r30,lo8(-(digital_pin_to_bit_mask_PGM))
 335 0006 F040      		sbci r31,hi8(-(digital_pin_to_bit_mask_PGM))
 336               	/* #APP */
 337               	 ;  38 "Platform.c" 1
 338 0008 2491      		lpm r18, Z
 339               		
 340               	 ;  0 "" 2
 341               	/* #NOAPP */
 342               	.LBE9:
 343               	.LBB10:
  39:Platform.c    **** 	uint8_t port = digitalPinToPort(pin);
 344               		.stabn	68,0,39,.LM24-.LFBB2
 345               	.LM24:
 346 000a FC01      		movw r30,r24
 347 000c E050      		subi r30,lo8(-(digital_pin_to_port_PGM))
 348 000e F040      		sbci r31,hi8(-(digital_pin_to_port_PGM))
 349               	/* #APP */
 350               	 ;  39 "Platform.c" 1
 351 0010 E491      		lpm r30, Z
 352               		
 353               	 ;  0 "" 2
 354               	/* #NOAPP */
 355               	.LBE10:
  40:Platform.c    **** 	volatile uint8_t *out;
  41:Platform.c    **** 
  42:Platform.c    **** 	if (port == NOT_A_PIN) return;
 356               		.stabn	68,0,42,.LM25-.LFBB2
 357               	.LM25:
GAS LISTING /tmp/ccwbtrHk.s 			page 8


 358 0012 EE23      		tst r30
 359 0014 01F0      		breq .L10
 360               	.LBB11:
  43:Platform.c    **** 
  44:Platform.c    **** 	// If the pin that support PWM output, we need to turn it off
  45:Platform.c    **** 	// before doing a digital write.
  46:Platform.c    **** 	//	if (timer != NOT_ON_TIMER) turnOffPWM(timer);
  47:Platform.c    **** 
  48:Platform.c    **** 	out = portOutputRegister(port);
 361               		.stabn	68,0,48,.LM26-.LFBB2
 362               	.LM26:
 363 0016 F0E0      		ldi r31,0
 364 0018 EE0F      		lsl r30
 365 001a FF1F      		rol r31
 366 001c E050      		subi r30,lo8(-(port_to_output_PGM))
 367 001e F040      		sbci r31,hi8(-(port_to_output_PGM))
 368               	/* #APP */
 369               	 ;  48 "Platform.c" 1
 370 0020 A591      		lpm r26, Z+
 371 0022 B491      		lpm r27, Z
 372               		
 373               	 ;  0 "" 2
 374               	/* #NOAPP */
 375               	.LBE11:
  49:Platform.c    **** 
  50:Platform.c    **** 	uint8_t oldSREG = SREG;
 376               		.stabn	68,0,50,.LM27-.LFBB2
 377               	.LM27:
 378 0024 9FB7      		in r25,__SREG__
  51:Platform.c    **** 	cli();
 379               		.stabn	68,0,51,.LM28-.LFBB2
 380               	.LM28:
 381               	/* #APP */
 382               	 ;  51 "Platform.c" 1
 383 0026 F894      		cli
 384               	 ;  0 "" 2
  52:Platform.c    **** 
  53:Platform.c    **** 	if (val == LOW) {
 385               		.stabn	68,0,53,.LM29-.LFBB2
 386               	.LM29:
 387               	/* #NOAPP */
 388 0028 6111      		cpse r22,__zero_reg__
 389 002a 00C0      		rjmp .L12
  54:Platform.c    **** 		*out &= ~bit;
 390               		.stabn	68,0,54,.LM30-.LFBB2
 391               	.LM30:
 392 002c 8C91      		ld r24,X
 393 002e E22F      		mov r30,r18
 394 0030 E095      		com r30
 395 0032 E823      		and r30,r24
 396 0034 00C0      		rjmp .L17
 397               	.L12:
  55:Platform.c    **** 	} else {
  56:Platform.c    **** 		*out |= bit;
 398               		.stabn	68,0,56,.LM31-.LFBB2
 399               	.LM31:
 400 0036 EC91      		ld r30,X
GAS LISTING /tmp/ccwbtrHk.s 			page 9


 401 0038 E22B      		or r30,r18
 402               	.L17:
 403 003a EC93      		st X,r30
  57:Platform.c    **** 	}
  58:Platform.c    **** 
  59:Platform.c    **** 	SREG = oldSREG;
 404               		.stabn	68,0,59,.LM32-.LFBB2
 405               	.LM32:
 406 003c 9FBF      		out __SREG__,r25
 407               	.L10:
 408 003e 0895      		ret
 409               		.size	digitalWrite, .-digitalWrite
 410               		.stabs	"oldSREG:r(8,2)",64,0,50,25
 411               		.stabn	192,0,0,.LFBB2-.LFBB2
 412               		.stabs	"__addr16:r(8,4)",64,0,48,30
 413               		.stabn	192,0,0,.LBB11-.LFBB2
 414               		.stabn	224,0,0,.LBE11-.LFBB2
 415               		.stabn	224,0,0,.Lscope2-.LFBB2
 416               	.Lscope2:
 417               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 418               		.stabd	78,0,0
 419               		.section	.text.digitalRead,"ax",@progbits
 420               		.stabs	"digitalRead:F(0,1)",36,0,62,digitalRead
 421               		.stabs	"pin:P(8,2)",64,0,62,24
 422               	.global	digitalRead
 423               		.type	digitalRead, @function
 424               	digitalRead:
 425               		.stabd	46,0,0
  60:Platform.c    **** }
  61:Platform.c    **** 
  62:Platform.c    **** int digitalRead(uint8_t pin)
  63:Platform.c    **** {
 426               		.stabn	68,0,63,.LM33-.LFBB3
 427               	.LM33:
 428               	.LFBB3:
 429               	/* prologue: function */
 430               	/* frame size = 0 */
 431               	/* stack size = 0 */
 432               	.L__stack_usage = 0
 433               	.LBB12:
  64:Platform.c    ****   //uint8_t timer = digitalPinToTimer(pin);
  65:Platform.c    **** 	uint8_t bit = digitalPinToBitMask(pin);
 434               		.stabn	68,0,65,.LM34-.LFBB3
 435               	.LM34:
 436 0000 90E0      		ldi r25,0
 437 0002 FC01      		movw r30,r24
 438 0004 E050      		subi r30,lo8(-(digital_pin_to_bit_mask_PGM))
 439 0006 F040      		sbci r31,hi8(-(digital_pin_to_bit_mask_PGM))
 440               	/* #APP */
 441               	 ;  65 "Platform.c" 1
 442 0008 2491      		lpm r18, Z
 443               		
 444               	 ;  0 "" 2
 445               	/* #NOAPP */
 446               	.LBE12:
 447               	.LBB13:
  66:Platform.c    **** 	uint8_t port = digitalPinToPort(pin);
GAS LISTING /tmp/ccwbtrHk.s 			page 10


 448               		.stabn	68,0,66,.LM35-.LFBB3
 449               	.LM35:
 450 000a FC01      		movw r30,r24
 451 000c E050      		subi r30,lo8(-(digital_pin_to_port_PGM))
 452 000e F040      		sbci r31,hi8(-(digital_pin_to_port_PGM))
 453               	/* #APP */
 454               	 ;  66 "Platform.c" 1
 455 0010 E491      		lpm r30, Z
 456               		
 457               	 ;  0 "" 2
 458               	/* #NOAPP */
 459               	.LBE13:
  67:Platform.c    **** 
  68:Platform.c    **** 	if (port == NOT_A_PIN) return LOW;
 460               		.stabn	68,0,68,.LM36-.LFBB3
 461               	.LM36:
 462 0012 EE23      		tst r30
 463 0014 01F0      		breq .L21
 464               	.LBB14:
  69:Platform.c    **** 
  70:Platform.c    **** 	// If the pin that support PWM output, we need to turn it off
  71:Platform.c    **** 	// before getting a digital reading.
  72:Platform.c    **** 	//if (timer != NOT_ON_TIMER) turnOffPWM(timer);
  73:Platform.c    **** 
  74:Platform.c    **** 	if (*portInputRegister(port) & bit) return HIGH;
 465               		.stabn	68,0,74,.LM37-.LFBB3
 466               	.LM37:
 467 0016 F0E0      		ldi r31,0
 468 0018 EE0F      		lsl r30
 469 001a FF1F      		rol r31
 470 001c E050      		subi r30,lo8(-(port_to_input_PGM))
 471 001e F040      		sbci r31,hi8(-(port_to_input_PGM))
 472               	/* #APP */
 473               	 ;  74 "Platform.c" 1
 474 0020 A591      		lpm r26, Z+
 475 0022 B491      		lpm r27, Z
 476               		
 477               	 ;  0 "" 2
 478               	/* #NOAPP */
 479               	.LBE14:
 480 0024 EC91      		ld r30,X
  68:Platform.c    **** 
 481               		.stabn	68,0,68,.LM38-.LFBB3
 482               	.LM38:
 483 0026 E223      		and r30,r18
 484 0028 81E0      		ldi r24,lo8(1)
 485 002a 90E0      		ldi r25,0
 486 002c 01F4      		brne .L19
 487 002e 80E0      		ldi r24,0
 488 0030 0895      		ret
 489               	.L21:
 490 0032 80E0      		ldi r24,0
 491 0034 90E0      		ldi r25,0
 492               	.L19:
  75:Platform.c    **** 	return LOW;
  76:Platform.c    **** }
 493               		.stabn	68,0,76,.LM39-.LFBB3
GAS LISTING /tmp/ccwbtrHk.s 			page 11


 494               	.LM39:
 495 0036 0895      		ret
 496               		.size	digitalRead, .-digitalRead
 497               		.stabs	"__addr16:r(8,4)",64,0,74,30
 498               		.stabn	192,0,0,.LBB14-.LFBB3
 499               		.stabn	224,0,0,.LBE14-.LFBB3
 500               	.Lscope3:
 501               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 502               		.stabd	78,0,0
 503               		.stabs	"SDA:c=i2",128,0,0,0
 504               		.stabs	"SCL:c=i3",128,0,0,0
 505               		.stabs	"SS:c=i17",128,0,0,0
 506               		.stabs	"MOSI:c=i16",128,0,0,0
 507               		.stabs	"MISO:c=i14",128,0,0,0
 508               		.stabs	"SCK:c=i15",128,0,0,0
 509               		.stabs	"A0:c=i18",128,0,0,0
 510               		.stabs	"A1:c=i19",128,0,0,0
 511               		.stabs	"A2:c=i20",128,0,0,0
 512               		.stabs	"A3:c=i21",128,0,0,0
 513               		.stabs	"A4:c=i22",128,0,0,0
 514               		.stabs	"A5:c=i23",128,0,0,0
 515               		.stabs	"A6:c=i24",128,0,0,0
 516               		.stabs	"A7:c=i25",128,0,0,0
 517               		.stabs	"A8:c=i26",128,0,0,0
 518               		.stabs	"A9:c=i27",128,0,0,0
 519               		.stabs	"A10:c=i28",128,0,0,0
 520               		.stabs	"A11:c=i29",128,0,0,0
 521               		.text
 522               		.stabs	"",100,0,0,.Letext0
 523               	.Letext0:
 524               		.ident	"GCC: (GNU) 5.4.0"
GAS LISTING /tmp/ccwbtrHk.s 			page 12


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Platform.c
     /tmp/ccwbtrHk.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccwbtrHk.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccwbtrHk.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccwbtrHk.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccwbtrHk.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccwbtrHk.s:133    .text.pinMode:0000000000000000 pinMode
     /tmp/ccwbtrHk.s:320    .text.digitalWrite:0000000000000000 digitalWrite
     /tmp/ccwbtrHk.s:424    .text.digitalRead:0000000000000000 digitalRead

UNDEFINED SYMBOLS
digital_pin_to_bit_mask_PGM
digital_pin_to_port_PGM
port_to_mode_PGM
port_to_output_PGM
port_to_input_PGM
